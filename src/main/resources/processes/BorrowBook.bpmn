<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:zeebe="http://camunda.org/schema/zeebe/1.0" id="defs1" targetNamespace="lms">
  <bpmn:process id="BorrowBook" isExecutable="true">
    <bpmn:startEvent id="start"/>
    <bpmn:sequenceFlow id="f1" sourceRef="start" targetRef="checkAvailability"/>
    <bpmn:serviceTask id="checkAvailability" name="Availability Check"><bpmn:extensionElements><zeebe:taskDefinition type="check-availability"/></bpmn:extensionElements></bpmn:serviceTask>
    <bpmn:sequenceFlow id="f2" sourceRef="checkAvailability" targetRef="approval"/>
    <bpmn:userTask id="approval" name="Librarian Approval"/>
    <bpmn:boundaryEvent id="reminderTimer" attachedToRef="approval"><bpmn:timerEventDefinition><bpmn:timeDuration>PT1H</bpmn:timeDuration></bpmn:timerEventDefinition></bpmn:boundaryEvent>
    <bpmn:serviceTask id="sendReminder" name="Send Reminder via Connector"/>
    <bpmn:sequenceFlow id="frem1" sourceRef="reminderTimer" targetRef="sendReminder"/>
    <bpmn:sequenceFlow id="f3" sourceRef="approval" targetRef="reserveBook"/>
    <bpmn:serviceTask id="reserveBook" name="Reserve Book"><bpmn:extensionElements><zeebe:taskDefinition type="reserve-book"/></bpmn:extensionElements></bpmn:serviceTask>
    <bpmn:sequenceFlow id="f4" sourceRef="reserveBook" targetRef="setDueDate"/>
    <bpmn:serviceTask id="setDueDate" name="Set Due Date"/>
    <bpmn:sequenceFlow id="f5" sourceRef="setDueDate" targetRef="sendConfirmation"/>
    <bpmn:serviceTask id="sendConfirmation" name="Send Confirmation Email"/>
    <bpmn:sequenceFlow id="f6" sourceRef="sendConfirmation" targetRef="end"/>
    <bpmn:endEvent id="end"/>
  </bpmn:process>
</bpmn:definitions>
